<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title  -->
    <title>test</title>

    <!-- Favicon  -->
<!--    <link rel="icon" href="images/core-img/favicon.ico">-->

    <!-- Core Style CSS -->
    <link rel="stylesheet" href="/css/core-style.css">

<!--    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=9rw0o1zqhd"></script>-->
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=9rw0o1zqhd&submodules=geocoder"></script>


</head>

<body>
<header th:replace="fragments/header :: header"></header>

<!-- ##### Breadcumb Area Start ##### -->
<div class="breadcumb_area bg-img" style="background-image: url(images/bg-img/breadcumb.jpg);">
    <div class="container h-100">
        <div class="row h-100 align-items-center">
            <div class="col-12">
                <div class="page-title text-center">
                    <h2>test</h2>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ##### Breadcumb Area End ##### -->

<!-- ##### Checkout Area Start ##### -->
<div class="checkout_area section-padding-80">
    <div class="container">
        <div class="row">


            <div id="map" style="width:100%;height:400px;"></div>
            <div>
                <input type="text" value="" placeholder="선택 위치" id="selected-address">
            </div>

            <!--            <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=9rw0o1zqhd"></script>-->
            <!--            <script th:src="@{https://oapi.map.naver.com/openapi/v3/maps.js(ncpClientId=9rw0o1zqhd)}" type="text/javascript"></script>-->
<!--            <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=9rw0o1zqhd&callback=CALLBACK_FUNCTION"></script>-->
            <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=9rw0o1zqhd&submodules=geocoder"></script>
            <script>
                var map, marker;

                function getLocation() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
                    } else {
                        console.error('Geolocation is not supported by this browser.');
                    }
                }

                function successCallback(position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;

                    createMap(latitude, longitude);
                }

                function errorCallback(error) {
                    console.error('Error getting location:', error);
                }

                function createMap(latitude, longitude) {
                    var position = new naver.maps.LatLng(latitude, longitude);

                    map = new naver.maps.Map('map', {
                        center: position,
                        zoom: 15
                    });

                    marker = new naver.maps.Marker({
                        position: position,
                        map: map
                    });

                    naver.maps.Event.addListener(map, 'click', function(e) {
                        marker.setPosition(e.coord);
                        searchCoordinateToAddress(e.coord);
                    });
                }

                function searchCoordinateToAddress(latlng) {
                    naver.maps.Service.reverseGeocode({
                        coords: latlng,
                        orders: [
                            naver.maps.Service.OrderType.ADDR,
                            naver.maps.Service.OrderType.ROAD_ADDR
                        ].join(',')
                    }, function(status, response) {
                        if (status !== naver.maps.Service.Status.OK) {
                            return alert('Something Wrong!');
                        }

                        var item = response.v2.results[0];
                        var address = item.name === 'roadaddr' ? item.roadAddress : item.jibunAddress;

                        document.getElementById('selected-address').value = address;
                    });
                }

                getLocation();
            </script>
<!--            <script>-->
<!--                var latitude;-->
<!--                var longitude;-->

<!--                function getLocation() {-->
<!--                    if (navigator.geolocation) {-->
<!--                        navigator.geolocation.getCurrentPosition(successCallback, errorCallback);-->
<!--                    } else {-->
<!--                        console.error('Geolocation is not supported by this browser.');-->
<!--                    }-->
<!--                }-->

<!--                function successCallback(position) {-->
<!--                    latitude = position.coords.latitude;-->
<!--                    longitude = position.coords.longitude;-->
<!--                    console.log('Latitude:', latitude, 'Longitude:', longitude);-->

<!--                    // 위치 정보를 받은 후에 네이버지도를 생성-->
<!--                    createMap();-->
<!--                }-->

<!--                function errorCallback(error) {-->
<!--                    console.error('Error getting location:', error);-->
<!--                }-->

<!--                //////////////////////////////////////////////////////////////////////////////-->

<!--                function createMap() {-->
<!--                    var position = new naver.maps.LatLng(latitude, longitude);-->

<!--                    var map = new naver.maps.Map('map', {-->
<!--                        center: position,-->
<!--                        zoom: 15,-->
<!--                        // mapTypeControl: true-->
<!--                    });-->

<!--                    var marker = new naver.maps.Marker({-->
<!--                        position: position,-->
<!--                        map: map-->
<!--                    });-->

<!--                    naver.maps.Event.addListener(map, 'click', function(e) {-->
<!--                        marker.setPosition(e.coord);-->
<!--                    });-->


<!--                }-->

<!--                // 호출-->
<!--                getLocation();-->
<!--            </script>-->


        </div>
    </div>
</div>
<!-- ##### Checkout Area End ##### -->


<header th:replace="fragments/footer :: footer"></header>


<!-- jQuery (Necessary for All JavaScript Plugins) -->
<script th:src="@{/js/jquery/jquery-2.2.4.min.js}"></script>
<!-- Popper js -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap js -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Plugins js -->
<script th:src="@{/js/plugins.js}"></script>
<!-- Classy Nav js -->
<script th:src="@{/js/classy-nav.min.js}"></script>
<!-- Active js -->
<script th:src="@{/js/active.js}"></script>


</body>

</html>